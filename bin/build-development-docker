#!/usr/bin/env bash

# This script builds a Docker image of our Rails app with RAILS_ENV=development.
# This is useful when running/testing the Docker setup locally.

set -euo pipefail # exit on any error, don't allow undefined variables, pipes don't swallow errors

docker compose build \
  --build-arg GIT_REV=$(git rev-parse origin/main) \
  --build-arg RUBY_VERSION=$(cat .ruby-version) \
  --build-arg RAILS_ENV=development \
  --progress=plain
